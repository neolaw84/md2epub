{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"md2epub md2epub is a helper library and CLI tool designed to convert Markdown text into professional, publish-ready EPUB files. It specifically targets formatting standards suitable for KDP (Kindle Direct Publishing), ensuring strict ordering of content. Features Project Scaffolding : Quickly initialize a book directory with a standard structure using Cookiecutter templates. Markdown to EPUB : Converts Markdown content into XHTML with a generated navigation structure. KDP-Ready Styling : Includes a CSS template optimized for e-readers, handling fonts, margins, and scene breaks. Custom Formatting : Specific support for novel formatting: xxx on a single line creates a centered Scene Break . *** on a single line creates a centered Asterisk Break . Quick Start Install the package and initialize your first book: pip install md2epub md2epub init my_first_book","title":"Home"},{"location":"#md2epub","text":"md2epub is a helper library and CLI tool designed to convert Markdown text into professional, publish-ready EPUB files. It specifically targets formatting standards suitable for KDP (Kindle Direct Publishing), ensuring strict ordering of content.","title":"md2epub"},{"location":"#features","text":"Project Scaffolding : Quickly initialize a book directory with a standard structure using Cookiecutter templates. Markdown to EPUB : Converts Markdown content into XHTML with a generated navigation structure. KDP-Ready Styling : Includes a CSS template optimized for e-readers, handling fonts, margins, and scene breaks. Custom Formatting : Specific support for novel formatting: xxx on a single line creates a centered Scene Break . *** on a single line creates a centered Asterisk Break .","title":"Features"},{"location":"#quick-start","text":"Install the package and initialize your first book: pip install md2epub md2epub init my_first_book","title":"Quick Start"},{"location":"dev_guide/","text":"Developer Guide Development Setup Clone the repository. Install the package in editable mode with development dependencies. python -m pip install --upgrade pip pip install -e .[dev] Running Tests The project uses pytest for testing. A custom script scripts/run_tests.py is provided to run tests and enforce coverage thresholds. python scripts/run_tests.py Failure Threshold: The build fails if more than 20% of tests fail. Coverage Threshold: Codebase < 1000 lines: 60% coverage required. Codebase >= 1000 lines: 80% coverage required. Project Architecture The codebase follows the SOLID principles, separating concerns into distinct modules: cli.py : Handles user interaction and commands (init, compile). epub_builder.py : The core logic class responsible for assembling the book and ensuring strictly ordered spine items. converter.py : Handles text processing, converting Markdown to HTML and injecting custom classes for separators. css_template.py : Contains the KDP_CSS string used to style the EPUB. Release Workflow The project uses GitHub Actions for CI/CD. Pull Requests: PRs to main must come from dev. PRs to dev must come from feature branches. Versioning: Semantic versioning is automated based on PR labels (bump:major, bump:patch, or default minor).","title":"Contributing & Testing"},{"location":"dev_guide/#developer-guide","text":"","title":"Developer Guide"},{"location":"dev_guide/#development-setup","text":"Clone the repository. Install the package in editable mode with development dependencies. python -m pip install --upgrade pip pip install -e .[dev]","title":"Development Setup"},{"location":"dev_guide/#running-tests","text":"The project uses pytest for testing. A custom script scripts/run_tests.py is provided to run tests and enforce coverage thresholds. python scripts/run_tests.py Failure Threshold: The build fails if more than 20% of tests fail. Coverage Threshold: Codebase < 1000 lines: 60% coverage required. Codebase >= 1000 lines: 80% coverage required.","title":"Running Tests"},{"location":"dev_guide/#project-architecture","text":"The codebase follows the SOLID principles, separating concerns into distinct modules: cli.py : Handles user interaction and commands (init, compile). epub_builder.py : The core logic class responsible for assembling the book and ensuring strictly ordered spine items. converter.py : Handles text processing, converting Markdown to HTML and injecting custom classes for separators. css_template.py : Contains the KDP_CSS string used to style the EPUB.","title":"Project Architecture"},{"location":"dev_guide/#release-workflow","text":"The project uses GitHub Actions for CI/CD. Pull Requests: PRs to main must come from dev. PRs to dev must come from feature branches. Versioning: Semantic versioning is automated based on PR labels (bump:major, bump:patch, or default minor).","title":"Release Workflow"},{"location":"license/","text":"License MIT License Copyright (c) 2026 Ed. Law Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"license/#license","text":"MIT License Copyright (c) 2026 Ed. Law Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"License"},{"location":"user_guide/","text":"This file contains the detailed instructions for writers using your tool. # User Guide ## Installation Ensure you have Python 3.12 or higher installed. ```bash pip install md2epub Creating a New Book To start a new project, use the init command. This creates a folder with all the necessary configuration files and templates. md2epub init my_new_book You will be prompted for basic details (Book Name, Author Name, Dedications, etc.) which are used to configure the project. Writing Your Content Navigate to your new book directory. You will see several markdown files (e.g., chapter_01.md, title.md). Write your book using standard Markdown. Formatting Tips: Chapters: Start chapters with a header # Chapter Title. Scene Breaks: To insert a visible break in the text, place xxx on its own line. Asterisks: To insert a decorative break, place *** on its own line. Configuration ( metadata.yaml ) The metadata.yaml file controls the build process. You must list every file you want to include in the EPUB here. title: \"My Great Novel\" author: \"Jane Doe\" language: en cover_image: cover.png front_matter: - title.md - copyright.md - dedication.md chapters: - chapter_01.md - chapter_02.md Compiling the EPUB When you are ready to generate your book: md2epub compile my_new_book This will generate an .epub file in the current directory.","title":"Installation & Usage"},{"location":"user_guide/#creating-a-new-book","text":"To start a new project, use the init command. This creates a folder with all the necessary configuration files and templates. md2epub init my_new_book You will be prompted for basic details (Book Name, Author Name, Dedications, etc.) which are used to configure the project.","title":"Creating a New Book"},{"location":"user_guide/#writing-your-content","text":"Navigate to your new book directory. You will see several markdown files (e.g., chapter_01.md, title.md). Write your book using standard Markdown.","title":"Writing Your Content"},{"location":"user_guide/#formatting-tips","text":"Chapters: Start chapters with a header # Chapter Title. Scene Breaks: To insert a visible break in the text, place xxx on its own line. Asterisks: To insert a decorative break, place *** on its own line.","title":"Formatting Tips:"},{"location":"user_guide/#configuration-metadatayaml","text":"The metadata.yaml file controls the build process. You must list every file you want to include in the EPUB here. title: \"My Great Novel\" author: \"Jane Doe\" language: en cover_image: cover.png front_matter: - title.md - copyright.md - dedication.md chapters: - chapter_01.md - chapter_02.md","title":"Configuration (metadata.yaml)"},{"location":"user_guide/#compiling-the-epub","text":"When you are ready to generate your book: md2epub compile my_new_book This will generate an .epub file in the current directory.","title":"Compiling the EPUB"},{"location":"reference/cli/","text":"CLI Reference md2epub.cli compile ( path ) Compile the Markdown book directory into an EPUB file. Source code in src/md2epub/cli.py 26 27 28 29 30 31 32 33 34 35 36 37 @main . command () @click . argument ( 'path' , type = click . Path ( exists = True , file_okay = False )) def compile ( path ): \"\"\"Compile the Markdown book directory into an EPUB file.\"\"\" click . echo ( f \"Compiling book from { path } \" ) try : from md2epub.epub_builder import EpubBuilder builder = EpubBuilder ( path ) output_file = builder . build () click . echo ( f \"Successfully compiled to { output_file } \" ) except Exception as e : click . echo ( f \"Error compiling book: { e } \" , err = True ) init ( output_dir ) Initialize a new Markdown book directory using Cookiecutter. Source code in src/md2epub/cli.py 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 @main . command () @click . argument ( 'output_dir' , type = click . Path (), required = False , default = '.' ) def init ( output_dir ): \"\"\"Initialize a new Markdown book directory using Cookiecutter.\"\"\" click . echo ( f \"Initializing book in { output_dir } \" ) try : from cookiecutter.main import cookiecutter template_path = os . path . join ( os . path . dirname ( __file__ ), 'templates' , 'cookiecutter-book' ) cookiecutter ( template_path , output_dir = output_dir ) click . echo ( \"Book structure created successfully.\" ) except Exception as e : click . echo ( f \"Error initializing book: { e } \" , err = True ) main () md2epub CLI: Convert Markdown to EPUB. Source code in src/md2epub/cli.py 5 6 7 8 @click . group () def main (): \"\"\"md2epub CLI: Convert Markdown to EPUB.\"\"\" pass","title":"CLI"},{"location":"reference/cli/#cli-reference","text":"","title":"CLI Reference"},{"location":"reference/cli/#md2epub.cli","text":"","title":"cli"},{"location":"reference/cli/#md2epub.cli.compile","text":"Compile the Markdown book directory into an EPUB file. Source code in src/md2epub/cli.py 26 27 28 29 30 31 32 33 34 35 36 37 @main . command () @click . argument ( 'path' , type = click . Path ( exists = True , file_okay = False )) def compile ( path ): \"\"\"Compile the Markdown book directory into an EPUB file.\"\"\" click . echo ( f \"Compiling book from { path } \" ) try : from md2epub.epub_builder import EpubBuilder builder = EpubBuilder ( path ) output_file = builder . build () click . echo ( f \"Successfully compiled to { output_file } \" ) except Exception as e : click . echo ( f \"Error compiling book: { e } \" , err = True )","title":"compile"},{"location":"reference/cli/#md2epub.cli.init","text":"Initialize a new Markdown book directory using Cookiecutter. Source code in src/md2epub/cli.py 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 @main . command () @click . argument ( 'output_dir' , type = click . Path (), required = False , default = '.' ) def init ( output_dir ): \"\"\"Initialize a new Markdown book directory using Cookiecutter.\"\"\" click . echo ( f \"Initializing book in { output_dir } \" ) try : from cookiecutter.main import cookiecutter template_path = os . path . join ( os . path . dirname ( __file__ ), 'templates' , 'cookiecutter-book' ) cookiecutter ( template_path , output_dir = output_dir ) click . echo ( \"Book structure created successfully.\" ) except Exception as e : click . echo ( f \"Error initializing book: { e } \" , err = True )","title":"init"},{"location":"reference/cli/#md2epub.cli.main","text":"md2epub CLI: Convert Markdown to EPUB. Source code in src/md2epub/cli.py 5 6 7 8 @click . group () def main (): \"\"\"md2epub CLI: Convert Markdown to EPUB.\"\"\" pass","title":"main"},{"location":"reference/converter/","text":"Converter md2epub.converter md_to_html ( md_content ) Convert Markdown content to HTML with specific formatting rules. Source code in src/md2epub/converter.py 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 def md_to_html ( md_content ): \"\"\" Convert Markdown content to HTML with specific formatting rules. \"\"\" # Pre-processing for custom separators # \"xxx\" -> Scene Break # \"***\" -> Asterisk Break # We want these to be on their own line. # Regex to find lines that are exactly \"xxx\" or \"***\" (ignoring whitespace) lines = md_content . split ( ' \\n ' ) processed_lines = [] for line in lines : stripped = line . strip () if stripped == \"xxx\" : processed_lines . append ( '<div class=\"scene-break\">xxx</div>' ) elif stripped == \"***\" : processed_lines . append ( '<div class=\"asterisk-break\">***</div>' ) else : processed_lines . append ( line ) content = ' \\n ' . join ( processed_lines ) # Convert to HTML # We use 'fenced_code' for code blocks html = markdown . markdown ( content , extensions = [ 'fenced_code' , 'nl2br' ]) # Post-processing if needed # Block quotes are handled by standard markdown (> -> blockquote) # Code blocks are handled by fenced_code (``` -> <pre><code>) return html","title":"Converter"},{"location":"reference/converter/#converter","text":"","title":"Converter"},{"location":"reference/converter/#md2epub.converter","text":"","title":"converter"},{"location":"reference/converter/#md2epub.converter.md_to_html","text":"Convert Markdown content to HTML with specific formatting rules. Source code in src/md2epub/converter.py 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 def md_to_html ( md_content ): \"\"\" Convert Markdown content to HTML with specific formatting rules. \"\"\" # Pre-processing for custom separators # \"xxx\" -> Scene Break # \"***\" -> Asterisk Break # We want these to be on their own line. # Regex to find lines that are exactly \"xxx\" or \"***\" (ignoring whitespace) lines = md_content . split ( ' \\n ' ) processed_lines = [] for line in lines : stripped = line . strip () if stripped == \"xxx\" : processed_lines . append ( '<div class=\"scene-break\">xxx</div>' ) elif stripped == \"***\" : processed_lines . append ( '<div class=\"asterisk-break\">***</div>' ) else : processed_lines . append ( line ) content = ' \\n ' . join ( processed_lines ) # Convert to HTML # We use 'fenced_code' for code blocks html = markdown . markdown ( content , extensions = [ 'fenced_code' , 'nl2br' ]) # Post-processing if needed # Block quotes are handled by standard markdown (> -> blockquote) # Code blocks are handled by fenced_code (``` -> <pre><code>) return html","title":"md_to_html"},{"location":"reference/epub_builder/","text":"Epub Builder md2epub.epub_builder","title":"Epub Builder"},{"location":"reference/epub_builder/#epub-builder","text":"","title":"Epub Builder"},{"location":"reference/epub_builder/#md2epub.epub_builder","text":"","title":"epub_builder"}]}